<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Grand Diwali ‚Äî Made by SHIVAM BEDI</title>
  <meta name="description" content="Interactive full-screen Diwali greeting with rangoli, diyas, fireworks and music." />
  <style>
    :root{
      --bg-dark:#05020a;
      --accent1:#ffcf5c;
      --accent2:#ff6b6b;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, Poppins, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;color:#fff}

    /* full-screen stage */
    .stage{
      position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;background:linear-gradient(180deg,#120018 0%, #0b0410 40%, #07030a 100%);
    }

    /* starfield */
    #stars{position:absolute;inset:0;z-index:0}

    /* gradient aurora */
    .aurora{position:absolute;inset:-20% -10% auto -10%;height:60%;background:radial-gradient(40% 60% at 10% 20%, rgba(255,140,80,0.06), transparent 20%),radial-gradient(40% 60% at 90% 80%, rgba(120,80,255,0.04), transparent 20%);mix-blend-mode:screen;filter:blur(40px);z-index:1}

    /* main card area */
    .panel{position:relative;z-index:5;max-width:1200px;width:100%;padding:28px;display:flex;gap:24px;align-items:flex-start;justify-content:space-between}

    /* left: big scene */
    .scene{flex:1;min-height:520px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter:blur(6px);box-shadow:0 20px 60px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03);position:relative;overflow:hidden;padding:18px}

    /* rangoli area bottom */
    .floor{position:absolute;left:0;right:0;bottom:0;height:38%;display:flex;align-items:flex-end;justify-content:center;pointer-events:none}

    .rangoli{width:min(460px,80%);transform:translateY(10%)}

    /* right: controls / message */
    .side{width:320px;min-width:240px;display:flex;flex-direction:column;gap:12px}
    .cardSmall{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:14px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 10px 30px rgba(0,0,0,0.5)}

    h1{font-size:clamp(26px,4vw,44px);margin:0;line-height:1.05;background:linear-gradient(90deg,var(--accent1),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    p.lead{margin:6px 0 0;color:rgba(255,255,255,0.9)}

    .bigBtn{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
    .play{background:linear-gradient(90deg,var(--accent1),#ff9a76);color:#2b0b00}
    .mute{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff}

    .signature{position:fixed;left:14px;bottom:10px;font-weight:700;color:var(--accent1);z-index:60}

    /* responsive */
    @media (max-width:900px){
      .panel{flex-direction:column;padding:14px}
      .side{width:100%}
      .scene{min-height:440px}
    }

    @media (max-width:480px){
      h1{font-size:28px}
      .rangoli{width:260px}
    }

    /* small helper animations */
    .pulse{animation:pulse 1.6s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.03)}100%{transform:scale(1)}}

    /* floating diya styles */
    .floating-diya{position:absolute;left:50%;top:58%;transform:translate(-50%,0);z-index:6;pointer-events:auto}
  </style>
</head>
<body>
  <div class="stage" id="stage">
    <canvas id="stars"></canvas>
    <div class="aurora"></div>

    <div class="panel" id="panel">
      <div class="scene" id="scene">
        <!-- fireworks canvas -->
        <canvas id="fireCanvas" style="position:absolute;inset:0;z-index:3"></canvas>

        <!-- decorative light particles -->
        <canvas id="particles" style="position:absolute;inset:0;z-index:2;pointer-events:none"></canvas>

        <!-- floating diyas container -->
        <div class="floating-diya" id="floatingDiya"></div>

        <!-- rangoli svg at bottom center -->
        <div class="floor">
          <svg class="rangoli" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="rg1" x1="0" x2="1">
                <stop offset="0" stop-color="#ffcf5c"/>
                <stop offset="1" stop-color="#ff6b6b"/>
              </linearGradient>
              <filter id="glow" x="-40%" y="-40%" width="180%" height="180%">
                <feGaussianBlur stdDeviation="6" result="b" />
                <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <g transform="translate(300,300)">
              <circle r="120" fill="rgba(255,255,255,0.02)"/>
              <g id="pattern">
                <path d="M0 -140 L30 -40 L140 -30 L60 40 L90 140 L0 80 L-90 140 L-60 40 L-140 -30 L-30 -40 Z" fill="url(#rg1)" opacity="0.95" filter="url(#glow)"/>
                <circle r="40" fill="#fff3d6" opacity="0.9"/>
              </g>
            </g>
          </svg>
        </div>
      </div>

      <div class="side">
        <div class="cardSmall">
          <h1>Shubh Deepavali</h1>
          <p class="lead">May the festival of lights brighten your life with joy, prosperity, and love. Tap "Light All" to start the celebration.</p>
        </div>

        <div class="cardSmall" style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <button id="lightAll" class="bigBtn play">üîÜ Light All</button>
          <div>
            <button id="muteBtn" class="bigBtn mute">üîä Mute</button>
          </div>
        </div>

        <div class="cardSmall">
          <strong>Tip</strong>
          <p style="margin:6px 0 0;color:rgba(255,255,255,0.85)">Works on mobile ‚Äî tap the scene. Hold to keep background music paused/resumed.</p>
        </div>

      </div>
    </div>

    <div class="signature">Made with ‚ù§Ô∏è by <strong>SHIVAM BEDI</strong></div>
  </div>

  <!-- audio assets (free) -->
  <audio id="bgMusic" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2023/02/22/audio_8ecda2b51b.mp3?filename=indian-festival-music-140209.mp3"></audio>
  <audio id="fireCrack" preload="auto" src="https://cdn.pixabay.com/download/audio/2021/09/07/audio_0861b4c8b0.mp3?filename=fireworks-1-7069.mp3"></audio>
  <audio id="diyaChime" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/08/09/audio_8d2e8f1b12.mp3?filename=soft-bell-6259.mp3"></audio>

  <script>
    // Utility
    const rand = (a,b)=>Math.random()*(b-a)+a;

    // STARFIELD
    const starsCanvas = document.getElementById('stars');
    const sCtx = starsCanvas.getContext('2d');
    function resizeStars(){starsCanvas.width=window.innerWidth;starsCanvas.height=window.innerHeight;drawStars()} 
    let stars=[];
    function drawStars(){
      const W=starsCanvas.width, H=starsCanvas.height; sCtx.clearRect(0,0,W,H);
      stars=[]; const count=Math.floor((W*H)/6000);
      for(let i=0;i<count;i++){stars.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.6,alpha:rand(0.2,0.95)})}
      for(const st of stars){sCtx.globalAlpha=st.alpha; sCtx.fillStyle='#fff'; sCtx.beginPath(); sCtx.arc(st.x,st.y,st.r,0,Math.PI*2); sCtx.fill()}
      sCtx.globalAlpha=1;
    }
    window.addEventListener('resize', resizeStars); resizeStars();

    // PARTICLES (soft floating lights)
    const partCanvas = document.getElementById('particles'); const pCtx = partCanvas.getContext('2d');
    function resizeParts(){partCanvas.width=window.innerWidth;partCanvas.height=document.getElementById('scene').clientHeight;}
    window.addEventListener('resize', resizeParts); resizeParts();
    const parts=[]; for(let i=0;i<45;i++){parts.push({x:Math.random()*window.innerWidth,y:Math.random()*partCanvas.height,r:rand(1,4),vx:rand(-0.2,0.2),vy:rand(-0.15,0.15),h:rand(20,60)})}
    function tickParts(){pCtx.clearRect(0,0,partCanvas.width,partCanvas.height); for(const p of parts){p.x+=p.vx; p.y+=p.vy; if(p.x<0)p.x=partCanvas.width; if(p.x>partCanvas.width)p.x=0; if(p.y<0)p.y=partCanvas.height; if(p.y>partCanvas.height)p.y=0; pCtx.globalAlpha=0.9*(p.r/4); pCtx.fillStyle=`hsl(${p.h} 90% 60%)`; pCtx.beginPath(); pCtx.arc(p.x,p.y,p.r,0,Math.PI*2); pCtx.fill(); } requestAnimationFrame(tickParts);} tickParts();

    // FIREWORKS
    const fireCanvas = document.getElementById('fireCanvas'); const fCtx = fireCanvas.getContext('2d');
    function resizeFire(){fireCanvas.width=document.getElementById('scene').clientWidth; fireCanvas.height=document.getElementById('scene').clientHeight}
    window.addEventListener('resize', resizeFire); resizeFire();
    let fwParticles=[];
    function launchFire(x,y,colors){
      const count=28+Math.floor(rand(0,20)); for(let i=0;i<count;i++){const a=rand(0,Math.PI*2); const s=rand(1.5,4.5); fwParticles.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,age:0,life:60+Math.random()*60,size:2+Math.random()*2,color:colors?colors[Math.floor(Math.random()*colors.length)]:`hsl(${Math.floor(rand(0,360))} 90% 60%)`})}
    }
    function tickFire(){fCtx.clearRect(0,0,fireCanvas.width,fireCanvas.height); for(let i=fwParticles.length-1;i>=0;i--){const p=fwParticles[i]; p.x+=p.vx; p.y+=p.vy; p.vy+=0.04; p.vx*=0.995; p.vy*=0.995; p.age++; const t=p.age/p.life; fCtx.globalAlpha=1-t; fCtx.fillStyle=p.color; fCtx.beginPath(); fCtx.arc(p.x,p.y,p.size*(1-t),0,Math.PI*2); fCtx.fill(); if(p.age>p.life) fwParticles.splice(i,1);} requestAnimationFrame(tickFire);} tickFire();

    // Floating diyas - create DOM SVGs for crisp visuals
    const floatWrap = document.getElementById('floatingDiya');
    function createDiya(xPct,yPct,scale=1,delay=0){
      const ns='http://www.w3.org/2000/svg'; const svg=document.createElementNS(ns,'svg'); svg.setAttribute('viewBox','0 0 200 200'); svg.style.width=100*scale+'px'; svg.style.height=100*scale+'px'; svg.style.position='absolute'; svg.style.left=`${xPct}%`; svg.style.top=`${yPct}%`; svg.style.transform='translate(-50%,0)'; svg.style.transition='transform 0.3s'; svg.style.pointerEvents='auto'; svg.innerHTML=`<defs><radialGradient id='g${Date.now()}' cx='30%' cy='30%'><stop offset='0%' stop-color='#fff7d0'/><stop offset='40%' stop-color='#ffd271'/><stop offset='100%' stop-color='#ff8a00'/></radialGradient></defs><g transform='translate(0,20)'><path d='M20 150 C60 110,140 110,180 150 L100 180 Z' fill='#502a0b' opacity='0.95'/><ellipse cx='100' cy='150' rx='70' ry='20' fill='#2b0b00' opacity='0.18'/><g transform='translate(100,120)'><path class='fout' d='M0 -30 C12 -26,22 -10,0 12 C-22 -10,-12 -26,0 -30 Z' fill='url(#g${Date.now()})' opacity='1'/><path class='fin' d='M0 -20 C7 -18,13 -8,0 8 C-13 -8,-7 -18,0 -20 Z' fill='#fff3d6' opacity='1'/></g></g>`;
      floatWrap.appendChild(svg);
      // gentle float animation
      svg.animate([{transform:'translate(-50%,0) translateY(0)'},{transform:'translate(-50%,0) translateY(-18px)'},{transform:'translate(-50%,0) translateY(0)'}],{duration:2200+Math.random()*2000,iterations:Infinity,delay});
      return svg;
    }

    // create multiple diyas
    const diyas=[]; function populateDiyas(){const positions=[[22,62],[38,68],[62,66],[78,60],[50,58]]; for(let i=0;i<positions.length;i++){const s=1+(i%2)*0.15; diyas.push(createDiya(positions[i][0],positions[i][1],s,i*120))}}; populateDiyas();

    // rangoli inner pulsing ‚Äî handled by SVG filter in CSS but we can pulse group
    // CONTROLS & AUDIO
    const bgMusic=document.getElementById('bgMusic'); const fireCrack=document.getElementById('fireCrack'); const diyaChime=document.getElementById('diyaChime');
    const lightAll=document.getElementById('lightAll'); const muteBtn=document.getElementById('muteBtn');
    let muted=false; muteBtn.addEventListener('click',()=>{muted=!muted; if(muted){bgMusic.pause(); muteBtn.textContent='üîá Muted'} else {bgMusic.play(); muteBtn.textContent='üîä Mute'}});

    // function to light everything
    function lightAllEffect(){
      // play chime
      if(!muted){diyaChime.currentTime=0; diyaChime.play();}
      // light diyas (increase glow + spawn fireworks)
      for(let i=0;i<6;i++){ setTimeout(()=>{ const x=rand(80,fireCanvas.width-80); const y=rand(40,fireCanvas.height/2); launchFire(x,y); if(!muted){fireCrack.currentTime=0; fireCrack.play();} }, i*400)}
      // animate rangoli glow: scale
      const rang = document.querySelector('.rangoli'); if(rang){ rang.animate([{transform:'translateY(10%) scale(0.98)'},{transform:'translateY(8%) scale(1.03)'},{transform:'translateY(10%) scale(0.98)'}],{duration:1100,iterations:3}) }
      // ensure background music plays (must be user-initiated to start on mobile)
      if(!muted){ bgMusic.volume=0.9; bgMusic.play().catch(()=>{}); }
    }

    // click handlers: scene tap lights a single firework and chime
    document.getElementById('scene').addEventListener('click',(e)=>{
      const rect=document.getElementById('scene').getBoundingClientRect(); const x=e.clientX-rect.left; const y=e.clientY-rect.top; launchFire(x,y); if(!muted){fireCrack.currentTime=0; fireCrack.play();}
    });

    lightAll.addEventListener('click', lightAllEffect);

    // autoplay music lightly after first user interaction (for mobile compatibility)
    function onFirstInteract(){ if(!muted){bgMusic.play().catch(()=>{});} window.removeEventListener('pointerdown',onFirstInteract); }
    window.addEventListener('pointerdown', onFirstInteract, {once:true});

    // small auto-firework loop to keep scene alive (sparse)
    setInterval(()=>{ if(Math.random()<0.35){ launchFire(rand(100,fireCanvas.width-100), rand(60,fireCanvas.height/2)); if(!muted){ fireCrack.currentTime=0; fireCrack.play(); } } }, 2500);

    // keep canvases sized to container
    function onResizeAll(){ resizeStars(); resizeParts(); resizeFire(); }
    window.addEventListener('resize', onResizeAll);

    // accessibility: long press on Sign to pause/resume bg music
    const sig=document.querySelector('.signature'); let holdTimer=null; sig.addEventListener('pointerdown',()=>{ holdTimer=setTimeout(()=>{ if(!bgMusic.paused){ bgMusic.pause(); } else { bgMusic.play(); } },800)}); sig.addEventListener('pointerup',()=>{ clearTimeout(holdTimer); });

    // initial tiny burst to announce
    setTimeout(()=>{ lightAllEffect(); },700);
  </script>
</body>
</html>
