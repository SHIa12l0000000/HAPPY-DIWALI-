<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Diwali ✨</title>
  <style>
    :root{
      --bg:#0b0416;
      --card:#0f1724;
      --accent:#ffcf5c;
      --glow:rgba(255,207,92,0.18);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1000px 600px at 10% 10%, rgba(255,160,60,0.06), transparent),
                  radial-gradient(800px 500px at 90% 90%, rgba(100,90,255,0.04), transparent),
                  var(--bg);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }

    .card{
      width:100%;
      max-width:900px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:20px;
      padding:28px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6), 0 0 40px var(--glow);
      position:relative;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.03);
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
    }

    .logo{
      width:76px;height:76px;border-radius:50%;
      background: radial-gradient(circle at 35% 35%, #ffd271, #ff8a00);
      display:flex;align-items:center;justify-content:center;
      box-shadow: 0 6px 18px rgba(255,138,0,0.18);
      transform:translateY(-4px);
    }
    .logo svg{filter:drop-shadow(0 6px 14px rgba(255,180,70,0.22))}

    h1{margin:0;font-size:clamp(24px,4vw,48px);line-height:1}
    p.lead{margin:6px 0 0;color:rgba(255,255,255,0.75)}

    .content{
      display:flex;gap:24px;margin-top:20px;align-items:center;flex-wrap:wrap;
    }

    .left{flex:1;min-width:260px}
    .right{width:320px;min-width:240px;display:flex;flex-direction:column;align-items:center}

    .diya{
      width:240px;height:240px;display:flex;align-items:center;justify-content:center;position:relative;
    }

    .diya svg{width:90%;height:90%}

    .btns{display:flex;gap:10px;margin-top:18px}
    button{cursor:pointer;border:0;padding:10px 16px;border-radius:12px;font-weight:600}
    .primary{background:linear-gradient(90deg,#ffb84d,#ff6b6b);color:#2b0b00;box-shadow:0 8px 24px rgba(255,107,107,0.12)}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.08);color:#fff}

    .message-box{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;margin-top:12px;width:100%;}

    /* tiny footer */
    .small{font-size:13px;color:rgba(255,255,255,0.6);margin-top:12px}

    /* fireworks canvas covers the card */
    #fireworks{position:absolute;inset:0;pointer-events:none}

    /* sparkle layers */
    .sparkle{position:absolute;inset:0;opacity:0.9;mix-blend-mode:screen}

    @media (max-width:640px){
      .content{flex-direction:column-reverse;align-items:center}
      .right{width:100%}
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <canvas id="fireworks"></canvas>

    <header>
      <div class="logo" aria-hidden>
        <!-- Little diya icon -->
        <svg viewBox="0 0 64 64" width="44" height="44" fill="none" xmlns="http://www.w3.org/2000/svg">
          <ellipse cx="32" cy="40" rx="20" ry="8" fill="#2b0b00" opacity="0.16"/>
          <path d="M32 16c6 6 9 11 7 15-3 6-14 11-14 11s3-11 7-20c1-3 0-5 0-6z" fill="#ffcf5c"/>
          <path d="M33 16s5 5 3 11c-2 6-10 10-10 10s2-8 6-15c1-2 1-6 1-6z" fill="#ff8a00"/>
        </svg>
      </div>
      <div>
        <h1>Happy Diwali ✨</h1>
        <p class="lead">May your life be filled with light, love & laughter. Click to light the Diya and celebrate!</p>
        <div class="small">Made with ❤️ — click anywhere on the diya or the "Light Diya" button</div>
      </div>
    </header>

    <div class="content">
      <div class="left">
        <div class="message-box" id="messageBox">
          <strong id="wishTitle">Wishing you a joyous Diwali!</strong>
          <div id="wishText">May the festival of lights bring you peace, prosperity, and happiness today and always.</div>
        </div>

        <div class="btns">
          <button class="primary" id="lightBtn">Light Diya</button>
          <button class="ghost" id="toggleMsgBtn">Change Message</button>
          <button class="ghost" id="shareBtn">Share</button>
        </div>

        <div class="small">Tip: You can customize this card, save as HTML and open on any mobile or desktop browser.</div>
      </div>

      <div class="right">
        <div class="diya" id="diyaWrap" title="Click to light">
          <!-- SVG diya with flame that toggles -->
          <svg viewBox="0 0 200 200" id="diyaSVG" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <radialGradient id="g1" cx="30%" cy="30%">
                <stop offset="0%" stop-color="#fff7d0" />
                <stop offset="40%" stop-color="#ffd271" />
                <stop offset="100%" stop-color="#ff8a00" />
              </radialGradient>
            </defs>
            <g transform="translate(0,20)">
              <path id="bowl" d="M20 150 C60 110,140 110,180 150 L100 180 Z" fill="#502a0b" opacity="0.95"/>
              <ellipse cx="100" cy="150" rx="70" ry="20" fill="#2b0b00" opacity="0.18"/>

              <!-- wick + flame -->
              <g transform="translate(100,120)" id="flameGroup" style="transform-origin:50% 50%">
                <path id="flameOuter" d="M0 -30 C12 -26,22 -10,0 12 C-22 -10,-12 -26,0 -30 Z" fill="url(#g1)" opacity="0"/>
                <path id="flameInner" d="M0 -20 C7 -18,13 -8,0 8 C-13 -8,-7 -18,0 -20 Z" fill="#fff3d6" opacity="0"/>
              </g>

              <!-- small decorative sparkles -->
              <g id="sparks" opacity="0.6">
                <circle cx="60" cy="80" r="2" fill="#ffd271"/>
                <circle cx="140" cy="70" r="2" fill="#ffd271"/>
              </g>
            </g>
          </svg>
        </div>

        <div style="text-align:center;margin-top:12px">
          <div class="small">Tap the diya to light it. Fireworks will follow!</div>
        </div>
      </div>
    </div>

  </div>


  <script>
  // Simple fireworks/confetti canvas
  const canvas = document.getElementById('fireworks');
  const ctx = canvas.getContext('2d');
  let W, H;
  function resize(){ W = canvas.width = card.clientWidth; H = canvas.height = card.clientHeight; }
  const card = document.getElementById('card');
  new ResizeObserver(resize).observe(card);
  resize();

  // particles
  const particles = [];
  function random(min,max){ return Math.random()*(max-min)+min }

  function spawnFirework(x,y){
    const count = 28 + Math.floor(Math.random()*20);
    const hue = Math.floor(Math.random()*360);
    for(let i=0;i<count;i++){
      const speed = random(1.5,5);
      const angle = Math.PI*2*(i/count);
      particles.push({x,y,vx:Math.cos(angle)*speed, vy:Math.sin(angle)*speed, life:60+Math.random()*40, age:0, size:2+Math.random()*3, hue});
    }
  }

  function tick(){
    ctx.clearRect(0,0,W,H);
    for(let i=particles.length-1;i>=0;i--){
      const p=particles[i];
      p.x += p.vx; p.y += p.vy; p.vy += 0.06; p.vx *= 0.995; p.vy *= 0.995;
      p.age++;
      const t = p.age/p.life;
      ctx.globalAlpha = 1 - t;
      ctx.fillStyle = `hsl(${p.hue} ${50 + (t*40)}% ${50 + (t*20)}%)`;
      ctx.beginPath(); ctx.arc(p.x, p.y, p.size*(1-t), 0, Math.PI*2); ctx.fill();
      if(p.age>p.life) particles.splice(i,1);
    }
    ctx.globalAlpha =1;
    requestAnimationFrame(tick);
  }
  tick();

  // Flame toggle & animation
  const flameOuter = document.getElementById('flameOuter');
  const flameInner = document.getElementById('flameInner');
  const flameGroup = document.getElementById('flameGroup');
  let lit=false;
  function lightDiya(){
    if(lit) return; lit=true;
    // show flame
    flameOuter.style.transition = 'opacity 400ms ease';
    flameInner.style.transition = 'opacity 300ms ease';
    flameOuter.style.opacity = 1; flameInner.style.opacity = 1;
    // pulse
    flameGroup.animate([
      { transform: 'translateY(0) scale(1)' },
      { transform: 'translateY(-4px) scale(1.06)' },
      { transform: 'translateY(0) scale(1)'}
    ], { duration:700, iterations: Infinity });

    // spawn fireworks sequence
    const rect = card.getBoundingClientRect();
    // spawn a few fireworks across the card
    for(let i=0;i<7;i++){
      setTimeout(()=>{
        const x = random(rect.left+40, rect.right-40) - rect.left;
        const y = random(10, rect.height/2);
        spawnFirework(x,y);
      }, i*400);
    }

    // play chime
    playChime();

    // celebration text change
    document.getElementById('wishTitle').textContent = 'Shubh Deepavali!';
    document.getElementById('wishText').textContent = 'May the light of diyas guide you to health, wealth, and success.';
  }

  // clickable handlers
  document.getElementById('lightBtn').addEventListener('click', lightDiya);
  document.getElementById('diyaWrap').addEventListener('click', lightDiya);

  // change message quick prompt
  document.getElementById('toggleMsgBtn').addEventListener('click', ()=>{
    const msgs = [
      ['Warm wishes on Diwali!','May your home be filled with joy and light.'],
      ['Diwali Greetings!','Wishing you a sparkling year ahead full of success.'],
      ['Happy Festival of Lights!','May the glow of lamps brighten your life.']
    ];
    const pick = msgs[Math.floor(Math.random()*msgs.length)];
    document.getElementById('wishTitle').textContent = pick[0];
    document.getElementById('wishText').textContent = pick[1];
  });

  // share functionality (uses Web Share API if available)
  document.getElementById('shareBtn').addEventListener('click', async ()=>{
    const text = document.getElementById('wishTitle').textContent + ' - ' + document.getElementById('wishText').textContent;
    if(navigator.share){
      try{ await navigator.share({title:'Happy Diwali', text}); }
      catch(e){}
    } else {
      // fallback: copy to clipboard
      try{ await navigator.clipboard.writeText(text); alert('Message copied to clipboard. Share it with your loved ones!'); }
      catch(e){ alert('Share not supported. Please copy the message: \n' + text); }
    }
  });

  // simple WebAudio chime
  function playChime(){
    try{
      const ctxAudio = new (window.AudioContext || window.webkitAudioContext)();
      const now = ctxAudio.currentTime;
      const freqs = [880, 1047, 1318];
      freqs.forEach((f,i)=>{
        const o = ctxAudio.createOscillator();
        const g = ctxAudio.createGain();
        o.frequency.value = f; o.type='sine';
        g.gain.value = 0.0001;
        o.connect(g); g.connect(ctxAudio.destination);
        const t = now + i*0.12;
        g.gain.setValueAtTime(0.0001, t);
        g.gain.exponentialRampToValueAtTime(0.12, t+0.02);
        g.gain.exponentialRampToValueAtTime(0.001, t+0.5);
        o.start(t); o.stop(t+0.6);
      });
    }catch(e){ /* ignore if audio blocked */ }
  }

  // small accessibility: press Enter on focused button
  ['lightBtn','toggleMsgBtn','shareBtn','diyaWrap'].forEach(id=>{
    const el = document.getElementById(id);
    if(!el) return;
    el.setAttribute('tabindex',0);
    el.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' ') lightDiya(); });
  });

  // allow clicking the whole card to spawn a single firework (fun)
  card.addEventListener('click', function(e){
    // ignore clicks on buttons (they have their own handlers)
    if(e.target.closest('button')) return;
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left; const y = e.clientY - rect.top;
    spawnFirework(x,y);
  });

  </script>
</body>
</html>
